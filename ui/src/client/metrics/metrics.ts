/**
 * Generated by orval v7.14.0 üç∫
 * Do not edit manually.
 * QDash API
 * API for QDash
 * OpenAPI spec version: 0.0.1
 */
import { useQuery } from "@tanstack/react-query";
import type {
  DataTag,
  DefinedInitialDataOptions,
  DefinedUseQueryResult,
  QueryClient,
  QueryFunction,
  QueryKey,
  UndefinedInitialDataOptions,
  UseQueryOptions,
  UseQueryResult,
} from "@tanstack/react-query";

import type {
  ChipMetricsResponse,
  GetChipMetricsParams,
  GetCouplingMetricHistoryParams,
  GetMetricsConfig200,
  GetQubitMetricHistoryParams,
  HTTPValidationError,
  QubitMetricHistoryResponse,
} from "../../schemas";

import { customInstance } from "../../lib/custom-instance";

type SecondParameter<T extends (...args: never) => unknown> = Parameters<T>[1];

/**
 * Get metrics metadata configuration for visualization.

Retrieves the metrics configuration loaded from YAML, including display
metadata for all qubit and coupling metrics used in the dashboard.

Returns
-------
dict[str, Any]
    Dictionary with metrics configuration including:
    - qubit_metrics: Metadata for single-qubit metrics (frequency, T1, T2, fidelities)
    - coupling_metrics: Metadata for two-qubit coupling metrics (ZX90, Bell state)
    - color_scale: Color scale configuration for heatmap visualization
 * @summary Get metrics configuration
 */
export const getMetricsConfig = (
  options?: SecondParameter<typeof customInstance>,
  signal?: AbortSignal,
) => {
  return customInstance<GetMetricsConfig200>(
    { url: `/metrics/config`, method: "GET", signal },
    options,
  );
};

export const getGetMetricsConfigQueryKey = () => {
  return [`/metrics/config`] as const;
};

export const getGetMetricsConfigQueryOptions = <
  TData = Awaited<ReturnType<typeof getMetricsConfig>>,
  TError = unknown,
>(options?: {
  query?: Partial<
    UseQueryOptions<Awaited<ReturnType<typeof getMetricsConfig>>, TError, TData>
  >;
  request?: SecondParameter<typeof customInstance>;
}) => {
  const { query: queryOptions, request: requestOptions } = options ?? {};

  const queryKey = queryOptions?.queryKey ?? getGetMetricsConfigQueryKey();

  const queryFn: QueryFunction<
    Awaited<ReturnType<typeof getMetricsConfig>>
  > = ({ signal }) => getMetricsConfig(requestOptions, signal);

  return { queryKey, queryFn, ...queryOptions } as UseQueryOptions<
    Awaited<ReturnType<typeof getMetricsConfig>>,
    TError,
    TData
  > & { queryKey: DataTag<QueryKey, TData> };
};

export type GetMetricsConfigQueryResult = NonNullable<
  Awaited<ReturnType<typeof getMetricsConfig>>
>;
export type GetMetricsConfigQueryError = unknown;

export function useGetMetricsConfig<
  TData = Awaited<ReturnType<typeof getMetricsConfig>>,
  TError = unknown,
>(
  options: {
    query: Partial<
      UseQueryOptions<
        Awaited<ReturnType<typeof getMetricsConfig>>,
        TError,
        TData
      >
    > &
      Pick<
        DefinedInitialDataOptions<
          Awaited<ReturnType<typeof getMetricsConfig>>,
          TError,
          Awaited<ReturnType<typeof getMetricsConfig>>
        >,
        "initialData"
      >;
    request?: SecondParameter<typeof customInstance>;
  },
  queryClient?: QueryClient,
): DefinedUseQueryResult<TData, TError> & {
  queryKey: DataTag<QueryKey, TData>;
};
export function useGetMetricsConfig<
  TData = Awaited<ReturnType<typeof getMetricsConfig>>,
  TError = unknown,
>(
  options?: {
    query?: Partial<
      UseQueryOptions<
        Awaited<ReturnType<typeof getMetricsConfig>>,
        TError,
        TData
      >
    > &
      Pick<
        UndefinedInitialDataOptions<
          Awaited<ReturnType<typeof getMetricsConfig>>,
          TError,
          Awaited<ReturnType<typeof getMetricsConfig>>
        >,
        "initialData"
      >;
    request?: SecondParameter<typeof customInstance>;
  },
  queryClient?: QueryClient,
): UseQueryResult<TData, TError> & { queryKey: DataTag<QueryKey, TData> };
export function useGetMetricsConfig<
  TData = Awaited<ReturnType<typeof getMetricsConfig>>,
  TError = unknown,
>(
  options?: {
    query?: Partial<
      UseQueryOptions<
        Awaited<ReturnType<typeof getMetricsConfig>>,
        TError,
        TData
      >
    >;
    request?: SecondParameter<typeof customInstance>;
  },
  queryClient?: QueryClient,
): UseQueryResult<TData, TError> & { queryKey: DataTag<QueryKey, TData> };
/**
 * @summary Get metrics configuration
 */

export function useGetMetricsConfig<
  TData = Awaited<ReturnType<typeof getMetricsConfig>>,
  TError = unknown,
>(
  options?: {
    query?: Partial<
      UseQueryOptions<
        Awaited<ReturnType<typeof getMetricsConfig>>,
        TError,
        TData
      >
    >;
    request?: SecondParameter<typeof customInstance>;
  },
  queryClient?: QueryClient,
): UseQueryResult<TData, TError> & { queryKey: DataTag<QueryKey, TData> } {
  const queryOptions = getGetMetricsConfigQueryOptions(options);

  const query = useQuery(queryOptions, queryClient) as UseQueryResult<
    TData,
    TError
  > & { queryKey: DataTag<QueryKey, TData> };

  query.queryKey = queryOptions.queryKey;

  return query;
}

/**
 * Get chip calibration metrics for visualization.

This endpoint returns calibration metrics for a specific chip from the database, including:
- Qubit frequency, anharmonicity, T1, T2 echo times
- Gate fidelities (single-qubit and two-qubit)
- Readout fidelities

Args:
----
    chip_id: The chip identifier
    ctx: Project context with user and project information
    within_hours: Optional filter to only include data from last N hours (e.g., 24)
    selection_mode: "latest" to get most recent values, "best" to get optimal values

Returns:
-------
    ChipMetricsResponse with all metrics data
 * @summary Get Chip Metrics
 */
export const getChipMetrics = (
  chipId: string,
  params?: GetChipMetricsParams,
  options?: SecondParameter<typeof customInstance>,
  signal?: AbortSignal,
) => {
  return customInstance<ChipMetricsResponse>(
    { url: `/metrics/chips/${chipId}/metrics`, method: "GET", params, signal },
    options,
  );
};

export const getGetChipMetricsQueryKey = (
  chipId?: string,
  params?: GetChipMetricsParams,
) => {
  return [
    `/metrics/chips/${chipId}/metrics`,
    ...(params ? [params] : []),
  ] as const;
};

export const getGetChipMetricsQueryOptions = <
  TData = Awaited<ReturnType<typeof getChipMetrics>>,
  TError = HTTPValidationError,
>(
  chipId: string,
  params?: GetChipMetricsParams,
  options?: {
    query?: Partial<
      UseQueryOptions<Awaited<ReturnType<typeof getChipMetrics>>, TError, TData>
    >;
    request?: SecondParameter<typeof customInstance>;
  },
) => {
  const { query: queryOptions, request: requestOptions } = options ?? {};

  const queryKey =
    queryOptions?.queryKey ?? getGetChipMetricsQueryKey(chipId, params);

  const queryFn: QueryFunction<Awaited<ReturnType<typeof getChipMetrics>>> = ({
    signal,
  }) => getChipMetrics(chipId, params, requestOptions, signal);

  return {
    queryKey,
    queryFn,
    enabled: !!chipId,
    ...queryOptions,
  } as UseQueryOptions<
    Awaited<ReturnType<typeof getChipMetrics>>,
    TError,
    TData
  > & { queryKey: DataTag<QueryKey, TData> };
};

export type GetChipMetricsQueryResult = NonNullable<
  Awaited<ReturnType<typeof getChipMetrics>>
>;
export type GetChipMetricsQueryError = HTTPValidationError;

export function useGetChipMetrics<
  TData = Awaited<ReturnType<typeof getChipMetrics>>,
  TError = HTTPValidationError,
>(
  chipId: string,
  params: undefined | GetChipMetricsParams,
  options: {
    query: Partial<
      UseQueryOptions<Awaited<ReturnType<typeof getChipMetrics>>, TError, TData>
    > &
      Pick<
        DefinedInitialDataOptions<
          Awaited<ReturnType<typeof getChipMetrics>>,
          TError,
          Awaited<ReturnType<typeof getChipMetrics>>
        >,
        "initialData"
      >;
    request?: SecondParameter<typeof customInstance>;
  },
  queryClient?: QueryClient,
): DefinedUseQueryResult<TData, TError> & {
  queryKey: DataTag<QueryKey, TData>;
};
export function useGetChipMetrics<
  TData = Awaited<ReturnType<typeof getChipMetrics>>,
  TError = HTTPValidationError,
>(
  chipId: string,
  params?: GetChipMetricsParams,
  options?: {
    query?: Partial<
      UseQueryOptions<Awaited<ReturnType<typeof getChipMetrics>>, TError, TData>
    > &
      Pick<
        UndefinedInitialDataOptions<
          Awaited<ReturnType<typeof getChipMetrics>>,
          TError,
          Awaited<ReturnType<typeof getChipMetrics>>
        >,
        "initialData"
      >;
    request?: SecondParameter<typeof customInstance>;
  },
  queryClient?: QueryClient,
): UseQueryResult<TData, TError> & { queryKey: DataTag<QueryKey, TData> };
export function useGetChipMetrics<
  TData = Awaited<ReturnType<typeof getChipMetrics>>,
  TError = HTTPValidationError,
>(
  chipId: string,
  params?: GetChipMetricsParams,
  options?: {
    query?: Partial<
      UseQueryOptions<Awaited<ReturnType<typeof getChipMetrics>>, TError, TData>
    >;
    request?: SecondParameter<typeof customInstance>;
  },
  queryClient?: QueryClient,
): UseQueryResult<TData, TError> & { queryKey: DataTag<QueryKey, TData> };
/**
 * @summary Get Chip Metrics
 */

export function useGetChipMetrics<
  TData = Awaited<ReturnType<typeof getChipMetrics>>,
  TError = HTTPValidationError,
>(
  chipId: string,
  params?: GetChipMetricsParams,
  options?: {
    query?: Partial<
      UseQueryOptions<Awaited<ReturnType<typeof getChipMetrics>>, TError, TData>
    >;
    request?: SecondParameter<typeof customInstance>;
  },
  queryClient?: QueryClient,
): UseQueryResult<TData, TError> & { queryKey: DataTag<QueryKey, TData> } {
  const queryOptions = getGetChipMetricsQueryOptions(chipId, params, options);

  const query = useQuery(queryOptions, queryClient) as UseQueryResult<
    TData,
    TError
  > & { queryKey: DataTag<QueryKey, TData> };

  query.queryKey = queryOptions.queryKey;

  return query;
}

/**
 * Get historical metric data for a specific qubit with task_id for figure display.

This endpoint queries TaskResultHistoryDocument to retrieve calibration
history for a specific metric, including multiple executions on the same day.
Each history item includes task_id for displaying calibration figures.

Args:
----
    chip_id: The chip identifier
    qid: The qubit identifier (e.g., "0", "Q00")
    ctx: Project context with user and project information
    metric: Metric name to retrieve history for
    limit: Maximum number of history items (None for unlimited within time range)
    within_days: Optional filter to only include data from last N days

Returns:
-------
    QubitMetricHistoryResponse with historical metric data and task_ids
 * @summary Get Qubit Metric History
 */
export const getQubitMetricHistory = (
  chipId: string,
  qid: string,
  params: GetQubitMetricHistoryParams,
  options?: SecondParameter<typeof customInstance>,
  signal?: AbortSignal,
) => {
  return customInstance<QubitMetricHistoryResponse>(
    {
      url: `/metrics/chips/${chipId}/qubits/${qid}/history`,
      method: "GET",
      params,
      signal,
    },
    options,
  );
};

export const getGetQubitMetricHistoryQueryKey = (
  chipId?: string,
  qid?: string,
  params?: GetQubitMetricHistoryParams,
) => {
  return [
    `/metrics/chips/${chipId}/qubits/${qid}/history`,
    ...(params ? [params] : []),
  ] as const;
};

export const getGetQubitMetricHistoryQueryOptions = <
  TData = Awaited<ReturnType<typeof getQubitMetricHistory>>,
  TError = HTTPValidationError,
>(
  chipId: string,
  qid: string,
  params: GetQubitMetricHistoryParams,
  options?: {
    query?: Partial<
      UseQueryOptions<
        Awaited<ReturnType<typeof getQubitMetricHistory>>,
        TError,
        TData
      >
    >;
    request?: SecondParameter<typeof customInstance>;
  },
) => {
  const { query: queryOptions, request: requestOptions } = options ?? {};

  const queryKey =
    queryOptions?.queryKey ??
    getGetQubitMetricHistoryQueryKey(chipId, qid, params);

  const queryFn: QueryFunction<
    Awaited<ReturnType<typeof getQubitMetricHistory>>
  > = ({ signal }) =>
    getQubitMetricHistory(chipId, qid, params, requestOptions, signal);

  return {
    queryKey,
    queryFn,
    enabled: !!(chipId && qid),
    ...queryOptions,
  } as UseQueryOptions<
    Awaited<ReturnType<typeof getQubitMetricHistory>>,
    TError,
    TData
  > & { queryKey: DataTag<QueryKey, TData> };
};

export type GetQubitMetricHistoryQueryResult = NonNullable<
  Awaited<ReturnType<typeof getQubitMetricHistory>>
>;
export type GetQubitMetricHistoryQueryError = HTTPValidationError;

export function useGetQubitMetricHistory<
  TData = Awaited<ReturnType<typeof getQubitMetricHistory>>,
  TError = HTTPValidationError,
>(
  chipId: string,
  qid: string,
  params: GetQubitMetricHistoryParams,
  options: {
    query: Partial<
      UseQueryOptions<
        Awaited<ReturnType<typeof getQubitMetricHistory>>,
        TError,
        TData
      >
    > &
      Pick<
        DefinedInitialDataOptions<
          Awaited<ReturnType<typeof getQubitMetricHistory>>,
          TError,
          Awaited<ReturnType<typeof getQubitMetricHistory>>
        >,
        "initialData"
      >;
    request?: SecondParameter<typeof customInstance>;
  },
  queryClient?: QueryClient,
): DefinedUseQueryResult<TData, TError> & {
  queryKey: DataTag<QueryKey, TData>;
};
export function useGetQubitMetricHistory<
  TData = Awaited<ReturnType<typeof getQubitMetricHistory>>,
  TError = HTTPValidationError,
>(
  chipId: string,
  qid: string,
  params: GetQubitMetricHistoryParams,
  options?: {
    query?: Partial<
      UseQueryOptions<
        Awaited<ReturnType<typeof getQubitMetricHistory>>,
        TError,
        TData
      >
    > &
      Pick<
        UndefinedInitialDataOptions<
          Awaited<ReturnType<typeof getQubitMetricHistory>>,
          TError,
          Awaited<ReturnType<typeof getQubitMetricHistory>>
        >,
        "initialData"
      >;
    request?: SecondParameter<typeof customInstance>;
  },
  queryClient?: QueryClient,
): UseQueryResult<TData, TError> & { queryKey: DataTag<QueryKey, TData> };
export function useGetQubitMetricHistory<
  TData = Awaited<ReturnType<typeof getQubitMetricHistory>>,
  TError = HTTPValidationError,
>(
  chipId: string,
  qid: string,
  params: GetQubitMetricHistoryParams,
  options?: {
    query?: Partial<
      UseQueryOptions<
        Awaited<ReturnType<typeof getQubitMetricHistory>>,
        TError,
        TData
      >
    >;
    request?: SecondParameter<typeof customInstance>;
  },
  queryClient?: QueryClient,
): UseQueryResult<TData, TError> & { queryKey: DataTag<QueryKey, TData> };
/**
 * @summary Get Qubit Metric History
 */

export function useGetQubitMetricHistory<
  TData = Awaited<ReturnType<typeof getQubitMetricHistory>>,
  TError = HTTPValidationError,
>(
  chipId: string,
  qid: string,
  params: GetQubitMetricHistoryParams,
  options?: {
    query?: Partial<
      UseQueryOptions<
        Awaited<ReturnType<typeof getQubitMetricHistory>>,
        TError,
        TData
      >
    >;
    request?: SecondParameter<typeof customInstance>;
  },
  queryClient?: QueryClient,
): UseQueryResult<TData, TError> & { queryKey: DataTag<QueryKey, TData> } {
  const queryOptions = getGetQubitMetricHistoryQueryOptions(
    chipId,
    qid,
    params,
    options,
  );

  const query = useQuery(queryOptions, queryClient) as UseQueryResult<
    TData,
    TError
  > & { queryKey: DataTag<QueryKey, TData> };

  query.queryKey = queryOptions.queryKey;

  return query;
}

/**
 * Get historical metric data for a specific coupling with task_id for figure display.

This endpoint queries TaskResultHistoryDocument to retrieve calibration
history for a specific coupling metric, including multiple executions on the same day.
Each history item includes task_id for displaying calibration figures.

Args:
----
    chip_id: The chip identifier
    coupling_id: The coupling identifier (e.g., "0-1", "2-3")
    ctx: Project context with user and project information
    metric: Metric name to retrieve history for
    limit: Maximum number of history items (None for unlimited within time range)
    within_days: Optional filter to only include data from last N days

Returns:
-------
    QubitMetricHistoryResponse with historical metric data and task_ids
    (Note: qid field contains coupling_id for coupling metrics)
 * @summary Get Coupling Metric History
 */
export const getCouplingMetricHistory = (
  chipId: string,
  couplingId: string,
  params: GetCouplingMetricHistoryParams,
  options?: SecondParameter<typeof customInstance>,
  signal?: AbortSignal,
) => {
  return customInstance<QubitMetricHistoryResponse>(
    {
      url: `/metrics/chips/${chipId}/couplings/${couplingId}/history`,
      method: "GET",
      params,
      signal,
    },
    options,
  );
};

export const getGetCouplingMetricHistoryQueryKey = (
  chipId?: string,
  couplingId?: string,
  params?: GetCouplingMetricHistoryParams,
) => {
  return [
    `/metrics/chips/${chipId}/couplings/${couplingId}/history`,
    ...(params ? [params] : []),
  ] as const;
};

export const getGetCouplingMetricHistoryQueryOptions = <
  TData = Awaited<ReturnType<typeof getCouplingMetricHistory>>,
  TError = HTTPValidationError,
>(
  chipId: string,
  couplingId: string,
  params: GetCouplingMetricHistoryParams,
  options?: {
    query?: Partial<
      UseQueryOptions<
        Awaited<ReturnType<typeof getCouplingMetricHistory>>,
        TError,
        TData
      >
    >;
    request?: SecondParameter<typeof customInstance>;
  },
) => {
  const { query: queryOptions, request: requestOptions } = options ?? {};

  const queryKey =
    queryOptions?.queryKey ??
    getGetCouplingMetricHistoryQueryKey(chipId, couplingId, params);

  const queryFn: QueryFunction<
    Awaited<ReturnType<typeof getCouplingMetricHistory>>
  > = ({ signal }) =>
    getCouplingMetricHistory(
      chipId,
      couplingId,
      params,
      requestOptions,
      signal,
    );

  return {
    queryKey,
    queryFn,
    enabled: !!(chipId && couplingId),
    ...queryOptions,
  } as UseQueryOptions<
    Awaited<ReturnType<typeof getCouplingMetricHistory>>,
    TError,
    TData
  > & { queryKey: DataTag<QueryKey, TData> };
};

export type GetCouplingMetricHistoryQueryResult = NonNullable<
  Awaited<ReturnType<typeof getCouplingMetricHistory>>
>;
export type GetCouplingMetricHistoryQueryError = HTTPValidationError;

export function useGetCouplingMetricHistory<
  TData = Awaited<ReturnType<typeof getCouplingMetricHistory>>,
  TError = HTTPValidationError,
>(
  chipId: string,
  couplingId: string,
  params: GetCouplingMetricHistoryParams,
  options: {
    query: Partial<
      UseQueryOptions<
        Awaited<ReturnType<typeof getCouplingMetricHistory>>,
        TError,
        TData
      >
    > &
      Pick<
        DefinedInitialDataOptions<
          Awaited<ReturnType<typeof getCouplingMetricHistory>>,
          TError,
          Awaited<ReturnType<typeof getCouplingMetricHistory>>
        >,
        "initialData"
      >;
    request?: SecondParameter<typeof customInstance>;
  },
  queryClient?: QueryClient,
): DefinedUseQueryResult<TData, TError> & {
  queryKey: DataTag<QueryKey, TData>;
};
export function useGetCouplingMetricHistory<
  TData = Awaited<ReturnType<typeof getCouplingMetricHistory>>,
  TError = HTTPValidationError,
>(
  chipId: string,
  couplingId: string,
  params: GetCouplingMetricHistoryParams,
  options?: {
    query?: Partial<
      UseQueryOptions<
        Awaited<ReturnType<typeof getCouplingMetricHistory>>,
        TError,
        TData
      >
    > &
      Pick<
        UndefinedInitialDataOptions<
          Awaited<ReturnType<typeof getCouplingMetricHistory>>,
          TError,
          Awaited<ReturnType<typeof getCouplingMetricHistory>>
        >,
        "initialData"
      >;
    request?: SecondParameter<typeof customInstance>;
  },
  queryClient?: QueryClient,
): UseQueryResult<TData, TError> & { queryKey: DataTag<QueryKey, TData> };
export function useGetCouplingMetricHistory<
  TData = Awaited<ReturnType<typeof getCouplingMetricHistory>>,
  TError = HTTPValidationError,
>(
  chipId: string,
  couplingId: string,
  params: GetCouplingMetricHistoryParams,
  options?: {
    query?: Partial<
      UseQueryOptions<
        Awaited<ReturnType<typeof getCouplingMetricHistory>>,
        TError,
        TData
      >
    >;
    request?: SecondParameter<typeof customInstance>;
  },
  queryClient?: QueryClient,
): UseQueryResult<TData, TError> & { queryKey: DataTag<QueryKey, TData> };
/**
 * @summary Get Coupling Metric History
 */

export function useGetCouplingMetricHistory<
  TData = Awaited<ReturnType<typeof getCouplingMetricHistory>>,
  TError = HTTPValidationError,
>(
  chipId: string,
  couplingId: string,
  params: GetCouplingMetricHistoryParams,
  options?: {
    query?: Partial<
      UseQueryOptions<
        Awaited<ReturnType<typeof getCouplingMetricHistory>>,
        TError,
        TData
      >
    >;
    request?: SecondParameter<typeof customInstance>;
  },
  queryClient?: QueryClient,
): UseQueryResult<TData, TError> & { queryKey: DataTag<QueryKey, TData> } {
  const queryOptions = getGetCouplingMetricHistoryQueryOptions(
    chipId,
    couplingId,
    params,
    options,
  );

  const query = useQuery(queryOptions, queryClient) as UseQueryResult<
    TData,
    TError
  > & { queryKey: DataTag<QueryKey, TData> };

  query.queryKey = queryOptions.queryKey;

  return query;
}
